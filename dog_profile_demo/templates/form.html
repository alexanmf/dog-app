{% extends "base.html" %}
{% block content %}

<h2>{{ 'Edit Dog' if dog else 'New Dog' }}</h2>

<form method="post" enctype="multipart/form-data">

  <div class="row">
    <div>
      <label for="name">Name</label>
      <input id="name" name="name" required value="{{ dog.name if dog else '' }}">
    </div>

    <div>
      <label for="age">Age (years)</label>
      <input id="age" type="number" min="0" name="age" value="{{ dog.age if dog else 0 }}">
    </div>

    <div>
      <label for="size">Size</label>
      <select id="size" name="size">
        {% for s in ["Small","Medium","Large"] %}
          <option value="{{ s }}" {% if dog and dog.size==s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label for="status">Status</label>
      <select id="status" name="status">
        {% for s in ["Intake","Fostered","Hold","Adopted","Transferred"] %}
          <option value="{{ s }}" {% if dog and dog.status==s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="row">
    <div>
      <label>
        <input type="checkbox" name="kid_friendly" {% if dog and dog.kid_friendly %}checked{% endif %}>
        Kid friendly
      </label>
    </div>
    <div>
      <label>
        <input type="checkbox" name="cat_friendly" {% if dog and dog.cat_friendly %}checked{% endif %}>
        Cat friendly
      </label>
    </div>
    <div>
      <label>
        <input type="checkbox" name="dog_friendly" {% if dog and dog.dog_friendly %}checked{% endif %}>
        Dog friendly
      </label>
    </div>
  </div>

  <div class="row full">
    <div>
      <label for="notes">Notes</label>
      <textarea id="notes" name="notes" rows="6">{{ dog.notes if dog else '' }}</textarea>
    </div>
  </div>

  <div class="row full">
    <div>
      <label for="image">Photo</label>
      <input id="image" type="file" name="image" accept="image/png,image/jpeg,image/gif,image/webp">
      {% if dog and dog.image_url %}
        {% set raw = dog.image_url %}
        {% if raw.startswith('http') %}
          {% set preview_src = raw %}
        {% else %}
          {% set preview_src = url_for('static', filename=raw) %}
        {% endif %}
        <div style="margin-top: 8px;">
          <img src="{{ preview_src }}" alt="{{ dog.name }}" style="max-height:150px; border-radius:8px;">
        </div>
      {% endif %}
    </div>
  </div>

  <p>
    <button class="btn primary" type="submit">Save</button>
    <a class="btn" href="{{ url_for('index') }}">Cancel</a>
  </p>

</form>

{% endblock %}


